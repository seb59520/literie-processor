#!/usr/bin/env python3
"""
Fichier de version centralis√© pour l'application Matelas Processor
"""

# Version principale de l'application
VERSION = "3.9.0"

# Informations de build
BUILD_DATE = "2025-07-17"
BUILD_NUMBER = "20250717"

# Informations compl√®tes
VERSION_INFO = {
    "version": VERSION,
    "build_date": BUILD_DATE,
    "build_number": BUILD_NUMBER,
    "full_version": f"{VERSION} (Build {BUILD_NUMBER})"
}

def get_version():
    """Retourne la version de l'application"""
    return VERSION

def get_full_version():
    """Retourne la version compl√®te avec build"""
    return VERSION_INFO["full_version"]

def get_version_info():
    """Retourne toutes les informations de version"""
    return VERSION_INFO.copy()

def get_changelog():
    """Retourne le changelog de l'application"""
    return """
# Changelog - Matelas Processor

## Version 3.9.0 (2025-07-17)

### üéâ Nouveaut√©s
- **Syst√®me d'alertes en temps r√©el** : Notifications instantan√©es et gestion proactive des √©v√©nements
- **Interface utilisateur avanc√©e** : Panneau d'alertes d√©di√© avec animations fluides
- **Types d'alertes multiples** : INFO, WARNING, ERROR, SUCCESS, CRITICAL avec ic√¥nes et couleurs
- **Cat√©gories d'alertes** : Syst√®me, Traitement, Validation, R√©seau, S√©curit√©, Production
- **Notifications popup** : Dialogs pour alertes importantes avec auto-fermeture
- **Configuration compl√®te** : Dialog de param√©trage des alertes par type
- **Int√©gration workflow** : Alertes automatiques dans le traitement des fichiers

### üîß Am√©liorations
- **Gestion automatique** : Auto-dismiss selon le type d'alerte (3s √† 8s)
- **Compteur d'alertes** : Indicateur dans la barre de statut avec mise √† jour en temps r√©el
- **Filtrage avanc√©** : Par type, cat√©gorie, source avec m√©thodes utilitaires
- **Marquage intelligent** : Lu/non lu, ferm√©/actif avec statistiques
- **Limites et nettoyage** : Maximum 100 alertes, suppression automatique apr√®s 24h
- **S√©rialisation** : Sauvegarde/restauration des alertes en JSON
- **Animations fluides** : Apparition/disparition avec QPropertyAnimation

### üé® Interface utilisateur
- **Panneau d'alertes** : Onglet d√©di√© "üö® Alertes" dans l'interface principale
- **Widgets d'alertes** : Design moderne avec ic√¥nes, couleurs et boutons de fermeture
- **Barre de statut** : Compteur d'alertes avec indicateur color√© (vert/rouge)
- **Menu configuration** : R√©glages ‚Üí üö® Configuration des alertes
- **Responsive design** : Adaptation automatique de la hauteur selon le nombre d'alertes

### üß™ Tests et qualit√©
- **Tests unitaires complets** : 14 tests couvrant toutes les fonctionnalit√©s
- **Test d'int√©gration** : D√©monstration compl√®te avec 5 types d'alertes
- **Validation robuste** : Gestion d'erreurs et fallbacks
- **Documentation d√©taill√©e** : Guide complet d'utilisation et d'int√©gration

### üîß Int√©gration technique
- **Signaux PyQt6** : Communication asynchrone entre composants
- **Thread-safe** : Compatible avec le traitement multi-thread existant
- **M√©thodes utilitaires** : add_system_alert(), add_processing_alert(), etc.
- **Points d'int√©gration** : D√©but/fin de traitement, gestion d'erreurs
- **Compatibilit√©** : Aucune modification du code backend existant

### üìö Documentation
- **Guide utilisateur** : Utilisation du panneau d'alertes et configuration
- **Guide d√©veloppeur** : Int√©gration et API du syst√®me d'alertes
- **Architecture technique** : Classes, signaux, et workflow
- **Exemples d'utilisation** : Code d'int√©gration et cas d'usage
- **D√©pannage** : Solutions aux probl√®mes courants

---

## Version 3.8.0 (2025-07-17)

### üéâ Nouveaut√©s
- **Syst√®me d'alertes de noyaux non d√©tect√©s** : D√©tection automatique et correction interactive des noyaux "INCONNU"
- **Interface utilisateur d√©di√©e** : Dialog NoyauAlertDialog avec liste d√©roulante pour corriger les noyaux
- **Gestion multi-fichiers** : Identification claire des alertes par nom de fichier
- **Workflow int√©gr√©** : Priorit√© des alertes avant les recommandations de production

### üîß Am√©liorations
- **D√©tection automatique** : Identification des noyaux non d√©tect√©s pendant l'analyse LLM
- **Interface intuitive** : 
  - Tableau d√©taill√© avec index, description, noyau d√©tect√©, correction
  - Liste d√©roulante avec 6 types de noyaux disponibles
  - Boutons d'action pour correction par fichier ou globale
- **Types de noyaux support√©s** :
  - LATEX NATUREL
  - LATEX MIXTE 7 ZONES
  - MOUSSE RAINUREE 7 ZONES
  - LATEX RENFORCE
  - SELECT 43
  - MOUSSE VISCO
- **Int√©gration transparente** :
  - Aucune modification du code backend existant
  - Compatibilit√© totale avec les fonctionnalit√©s actuelles
  - Gestion d'erreurs robuste avec fallbacks

### üêõ Corrections
- Am√©lioration de la d√©tection des noyaux non identifi√©s
- Correction de l'affichage des alertes par fichier
- Am√©lioration de la gestion des corrections utilisateur

### üìö Documentation
- Documentation compl√®te du syst√®me d'alertes de noyaux
- Guide d'utilisation de l'interface de correction
- Tests automatis√©s pour validation des fonctionnalit√©s
- Scripts de test avec fichiers r√©els

### üîí S√©curit√©
- Validation des corrections utilisateur
- Gestion s√©curis√©e des donn√©es de correction

---

## Version 3.7.0 (2025-07-17)

### üéâ Nouveaut√©s
- **Support complet OpenAI** : Int√©gration native du provider OpenAI avec gestion des cl√©s API
- **Num√©rotation continue Excel** : Num√©rotation automatique des cas entre fichiers Excel pour la m√™me semaine
- **Gestion intelligente des quantit√©s** : D√©tection automatique des jumeaux et traitement des quantit√©s
- **Parsing JSON robuste** : Gestion avanc√©e des r√©ponses LLM avec correction automatique

### üîß Am√©liorations
- **Provider OpenAI** : Support complet avec validation des cl√©s API et gestion des erreurs
- **Num√©rotation Excel** : 
  - Num√©rotation continue entre fichiers (1-10, 11-20, etc.)
  - Fonctionne pour matelas et sommiers
  - Colonnes C2, E2, G2... W2 et D2, F2... X2
- **Gestion des quantit√©s** :
  - D√©tection automatique du mot "jumeaux" dans les descriptions
  - Quantit√© 2 + jumeaux = 1 configuration
  - Quantit√© 2 sans jumeaux = 2 configurations s√©par√©es
- **Parsing JSON LLM** :
  - Extraction automatique du JSON entour√© de backticks
  - Correction des cha√Ænes non termin√©es
  - Suppression des virgules finales orphelines
  - Gestion des r√©ponses tronqu√©es
- **Limites et timeouts** :
  - Timeout configurable (30s ‚Üí 60s)
  - Limite de tokens optimis√©e (8000 tokens)
  - Gestion des erreurs 400 Bad Request

### üêõ Corrections
- Correction de la duplication des configurations matelas li√©e aux quantit√©s
- Am√©lioration de la gestion des erreurs OpenAI (timeout, 400 Bad Request)
- Correction du parsing JSON pour les r√©ponses malform√©es
- Sauvegarde correcte de l'ordre des noyaux dans l'interface
- Correction de l'import get_version dans app_gui.py

### üìö Documentation
- Documentation de l'int√©gration OpenAI
- Guide d'utilisation de la num√©rotation continue Excel
- Tests de validation pour les nouvelles fonctionnalit√©s
- Documentation du parsing JSON robuste

### üîí S√©curit√©
- Validation renforc√©e des cl√©s API OpenAI
- Gestion s√©curis√©e des timeouts et limites

---

## Version 3.2.1 (2025-07-17)

### üîß Am√©liorations
- **Num√©rotation continue des cas** dans les fichiers Excel matelas et sommiers :
  - Le premier fichier va de 1 √† 10, le second de 11 √† 20, etc.
  - Colonnes C2, E2, G2... W2 et D2, F2... X2
  - Fonctionne pour tous les exports multi-fichiers
- **Correction du mapping** pour supporter tuples et cha√Ænes dans les mappings

### üêõ Corrections
- Correction du mapping pour supporter √† la fois les tuples et les cha√Ænes dans les mappings par d√©faut et personnalis√©s

---

## Version 3.2.0 (2025-07-17)

### üéâ Nouveaut√©s
- Ajout de l'onglet Maintenance avec gestion des tests automatis√©s

### üîß Am√©liorations
- Mise √† jour automatique de la version
- Am√©lioration du syst√®me de changelog

### üìö Documentation
- Documentation des nouvelles fonctionnalit√©s
- Tests de validation

---

## Version 3.1.0 (2025-07-17)

### üîß Am√©liorations
- **Prompt LLM am√©lior√©** : Instructions explicites pour extraire la description compl√®te des matelas
- **D√©tection FDL** : Ajout de la d√©tection "Fermeture de Liaison" avec toutes ses variantes
- **Mapping FDL_C51** : Nouveau champ C51 pour la fermeture de liaison dans le pr√©-import
- **Pr√©vention de troncature** : Le LLM ne tronque plus les descriptions de matelas

### üêõ Corrections
- Correction de l'extraction incompl√®te des descriptions matelas par le LLM
- Am√©lioration de la d√©tection de la mati√®re housse TENCEL LUXE 3D
- Correction du calcul des dimensions housse pour les matelas RAINUREE
- Am√©lioration du syst√®me de mise √† jour du changelog

### üìö Documentation
- Documentation de la correction du prompt LLM
- Guide d'utilisation du nouveau champ FDL_C51
- Tests de validation pour la d√©tection FDL

---

## Version 3.0.0 (2025-07-16)

### üéâ Nouveaut√©s
- **Syst√®me d'administration unifi√©** : Fusion du gestionnaire de mises √† jour avec l'administration
- **Actions rapides de version** : Mise √† jour patch/mineure/majeure en un clic
- **Interface simplifi√©e** : Un seul point d'entr√©e pour toutes les op√©rations d'administration
- **Liste des patches en temps r√©el** : Affichage dynamique des patches disponibles

### üîß Am√©liorations
- **Menu R√©glages optimis√©** : Suppression de la duplication, interface plus claire
- **Syst√®me de logging avanc√©** : Tra√ßabilit√© compl√®te des actions d'administration
- **Gestion des versions am√©lior√©e** : Incr√©mentation automatique intelligente
- **Interface utilisateur coh√©rente** : Design unifi√© et intuitif

### üêõ Corrections
- Correction de l'erreur QLineEdit.getText() dans PyQt6
- Nettoyage du changelog et suppression des entr√©es dupliqu√©es
- Am√©lioration de la lisibilit√© du changelog
- Correction des imports manquants

### üìö Documentation
- Documentation compl√®te de la fusion des syst√®mes
- Guide d'utilisation du nouveau syst√®me d'administration
- Tests automatis√©s pour validation

---

## Version 2.2.0 (2025-07-16)

### üéâ Nouveaut√©s
- **Syst√®me de version centralis√©** avec fichier version.py
- **Affichage de la version** dans l'interface principale
- **Menu r√©organis√©** selon les standards (R√©glages avant Aide)
- **Changelog int√©gr√©** accessible via le menu Aide
- **Gestionnaire de patches** pour les mises √† jour

### üîß Am√©liorations
- **Interface utilisateur** : Version visible dans le titre et le panneau gauche
- **Menu R√©glages** : Regroupement logique de toutes les options de configuration
- **Menu Aide** : Ajout du changelog et r√©organisation
- **Coh√©rence** : Version identique partout dans l'application

### üêõ Corrections
- Correction de l'ordre des menus selon les standards
- Am√©lioration de l'affichage de la version
- Correction des imports de version

### üìö Documentation
- Documentation compl√®te du syst√®me de version
- Guide de maintenance des versions
- Tests automatis√©s pour validation

---

## Version 2.1.0 (2025-07-16)

### üîß Am√©liorations
- **Versionning** : Syst√®me de gestion des versions
- **Changelog** : Am√©lioration de l'affichage du changelog
- **Patches** : Syst√®me de patches pour les mises √† jour

---

## Version 1.0.0 (2025-01-27)

### üéâ Nouveaut√©s
- **Interface graphique compl√®te** avec PyQt6
- **Traitement automatis√©** des devis PDF
- **Support LLM** pour l'extraction de donn√©es
- **Calculs automatiques** des dimensions housse
- **Export Excel** avec pr√©-import
- **Gestion des cl√©s API** s√©curis√©e
- **Tests automatis√©s** complets
- **Syst√®me de logs** avanc√©

### üîß Fonctionnalit√©s
- **Types de matelas support√©s** :
  - Latex Mixte 7 Zones
  - Latex Naturel
  - Latex Renforc√©
  - Mousse Visco√©lastique
  - Mousse Rainur√©e 7 Zones
  - Select 43

- **Providers LLM support√©s** :
  - OpenAI
  - Anthropic
  - Gemini
  - Mistral
  - OpenRouter
  - Ollama

- **Fonctionnalit√©s avanc√©es** :
  - Gestion des cl√©s API s√©curis√©e
  - Surveillance des co√ªts OpenRouter
  - Configuration des mappings Excel
  - Gestionnaire de mises √† jour
  - Documentation de maintenance
  - Tests automatis√©s

### üêõ Corrections
- Correction de la d√©tection des poign√©es pour TENCEL LUXE 3D
- Am√©lioration de la coloration conditionnelle Excel
- Optimisation des calculs de dimensions housse
- Correction des probl√®mes d'encodage

### üìö Documentation
- Guide d'aide complet int√©gr√©
- Documentation de maintenance
- Instructions d'installation
- Guide de configuration

### üîí S√©curit√©
- Stockage s√©curis√© des cl√©s API
- Validation des donn√©es d'entr√©e
- Gestion des erreurs robuste

---

**Note** : Cette version repr√©sente la premi√®re version stable de l'application Matelas Processor.
"""

if __name__ == "__main__":
    print(f"Matelas Processor - Version {get_full_version()}")
    print(f"Build date: {BUILD_DATE}")
    print(f"Build number: {BUILD_NUMBER}") 